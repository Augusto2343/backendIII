apiVersion: v1
kind: Service
metadata:
  name: kubeservice
spec:
  selector:
    app: kubeadoptapi
  ports:
    - port: 80
      targetPort: 8000
  type: LoadBalancer
---
apiVersion: apps/v1
kind: Deployment
metadata: 
  name: kubeadoptapi
spec:
  replicas: 5
  selector:
    matchLabels:
      app: kubeadoptapi
  template:
    metadata:
      labels:
        app: kubeadoptapi
    spec:
      containers:
        - name: kubecontainer
          image: augustonoriega123/adoptionapp:1.0.0
          ports:
            - containerPort: 8000
          env: 
            - name: MONGO_URL
              value: mongodb+srv://augustoxd2343@gmail.com:capi2025@cluster0.9s6datl.mongodb.net/preentrega?retryWrites=true&w=majority
            - name: TEST_MONGO_URL
              value: mongodb+srv://augustonoriega@gmail.com:capi2025@cluster0.9s6datl.mongodb.net/test?retryWrites=true&w=majority
            - name: PORT
              value: "5000"
            - name: SECRET_KEY
              value: "1234"
          imagePullPolicy: Always